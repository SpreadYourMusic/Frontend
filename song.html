---
layout: general
---

<script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/1.3.7/wavesurfer.min.js"></script>
<script src="/resources/js/jquery.min.js"></script>
<script src="/resources/js/jQuerySimpleCounter.js"></script>

<script>
    var wavesurfer = Object.create(WaveSurfer);

    document.addEventListener('DOMContentLoaded', function () {

        wavesurfer.init({
            container: '#waveform',
            waveColor: '#A8DBA8',
            progressColor: '#3B8686',
            barWidth: 5,
            pixelRatio: 1,
            barHeight: 1
        });

        /*wavesurfer.load('/resources/music/downloaded_song.mp3');*/
    });

    wavesurfer.on('ready', function () {
        /*wavesurfer.play();*/
    });

	wavesurfer.on('seek', function () {
    	audioElement.currentTime = $(this).val();
		curtime = parseInt(audioElement.currentTime, 10);
		$("#seek").attr("value", curtime);
	});



</script>

<style>
    .song{

        padding-right: 50px;
        padding-left: 50px;
    }

    .song-header{
        background-color: gray;
        padding-right: 0px;
        padding-left: 50px;
        padding-top: 30px;
        padding-bottom: 30px;
    }

    #play-button{
        width: 100%;
    }

    #h-image{
        width: 100%;
    }

	#play-button:hover{
		box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
	}

	#play-button:active {
    	vertical-align: top;
    	padding: 8px 13px 6px;
	}

    #waveform{
        position: relative;
        top: 20px;
    }

	#song-content{
      
        padding-right: 80px;
        padding-left: 80px;
        padding-top: 30px;
    }

    #song-content h1{
        border-bottom: 1px solid gray;
    }

	#columna-playlist{
		padding-top: 20px;
		padding-right: 20px;
        padding-left: 20px;
        font-size: 12px;
        margin:auto;
        width: 50%;
	}

    .columna-like{
        margin:auto;
        width: 50%;
        font-size: 12px;
    }


	#song-info-header{
		position: relative;
        top: 30px;
	}

	body{
		background: white;
	}

</style>

<script>

    function addPlaylist() {
        var id = document.getElementById("select-playlist").value;
        console.log(id);
        if(true){
            document.getElementById("error-playlist").style.display = "block";
        }else{

        }
    }

    $(document).ready( function () {
        var token = getCookie('token');
        var user = getCookie('username');

        var id = getParameterByName('id');
        var song = KOTLINJS.apis.obtainSongsFromUserServer_61zpoe$(user).array_hd7ov6$_0[0];

        if (song === null) {
            /* error */
        } else {
            console.log('hey');
            document.getElementById("h-titulo").innerHTML = song.name;
            document.getElementById("h-artista").innerHTML = song.album.creator.name;
            document.getElementById("h-album").innerHTML = song.album.name;
            document.getElementById("play-button-container").innerHTML = "<img id=\"play-button\"  src=\"resources/imgs/play.gif\" alt=\"play button\" onclick=\"playSong('" +  song.locationUri + "')\">";
            document.getElementById("h-image").src = song.album.artLocationUri;
            /*wavesurfer.load(song.locationUri);*/
            if (user !== null) {
                var playlist = KOTLINJS.apis.obtainPlaylistsFromUserServer_61zpoe$(user);
                var playlist_len = playlist.array_hd7ov6$_0.length;
                inner_html = "";
                for( i=0; i < playlist_len; i++){
                    var playlist_elem = playlist.array_hd7ov6$_0[i];
                    inner_html = inner_html + "<option value=\"" + playlist_elem.id + "\">" + playlist_elem.name + "</option>";
                }
                document.getElementById("select-playlist").innerHTML = inner_html;
                
            } else {
                /* no registrado */
                console.log('heyy');
                document.getElementById("song-content").innerHTML = "<h1>Login to add song to playlist</h1>";
            }
        }
        /* if song null*/
    });
</script>

</head>

<body>
	
    <div class="song">
        <!--
        <div class="container-fluid">
            <div class="row">
                <div class="col-7">

                    <div id="waveform"></div>
                </div>
                <div class="col-4">
                    <img class="album"  src="/resources/imgs/album.jpg">
                </div>
            </div>
        </div>
        -->
        <div class="song-header">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-7">
                        <div class="row">
                            <div class="col-4" id="play-button-container">
                                <img id="play-button"  src="resources/imgs/play.gif" alt="play button" onclick="playSong("'" + song.locationUri + "'")">
                            </div>
                            <div class="col-4" id="song-info-header">
                                <h1 id="h-titulo">Titulo</h1>
                                <h2 id="h-artista">Artista</h2>
								<h2 id="h-album">Album</h2>
                            </div>
                        </div>
                        <div id="waveform"></div>
                    </div>
                    <div class="col-4">
                        <img src="/resources/imgs/album.jpg" id="h-image">
                    </div>
                </div>
            </div>
        </div>
		<div id="counter"></div>
		<div id="song-content">
			 <div class="container-fluid">
                <div class="row">
                    <div class="col-6">
						<h1>Añadir a una playlist</h1>						
						<div id="columna-playlist">
							<div class="alert alert-danger" role="alert" id="error-playlist" style="display: none">
                                La playlist ya contiene esta canción.
							</div>

								  <select name="cars" id="select-playlist">

								  </select>
							  <button type="button" class="btn btn-outline-secondary" onclick="addPlaylist()">Añadir a playlist</button>

						</div>
					</div><!-- col -->
					 <div class="col-6">
						<h1>Cancion</h1>
						<div id="columna-like-fav">
							<div class="alert alert-danger" role="alert" id="error-like" style="display: none">
  								This is a danger alert—check it out!
							</div>
							 <div class="row">
								<div class="col-6">
                                    <div class="columna-like">
									<button type="button" class="btn btn-outline-danger">Me gusta</button>
                                    <h2>1234 me gusta...</h2>
                                    </div>
								</div>
								<div class="col-6">
                                    <div class="columna-like">
									<button type="button" class="btn btn-outline-warning">Favorito</button>
                                    </div>
								</div>
							</div>				
						</div>
					</div>
				</div>
			</div>
		</div>
    </div> <!-- song -->
	
</body>